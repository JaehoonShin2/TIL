Bean 을 문자열로 출력한다면?

- console로도 출력하고, file 로도 출력하고, db출력하고...


### Strategy pattern(전략패턴)

![](https://velog.velcdn.com/images/aristia/post/739567c3-b4cd-4003-ae9d-a969d7988eb2/image.png)

![](https://velog.velcdn.com/images/aristia/post/23cab517-4a94-4cea-b81c-ebda3bae4665/image.png)

![](https://velog.velcdn.com/images/aristia/post/46ea3723-7e21-428b-9cd9-cde006e93f12/image.png)

![](https://velog.velcdn.com/images/aristia/post/18d19425-d197-4997-8453-5cd8aed77060/image.png)

![](https://velog.velcdn.com/images/aristia/post/2cfd29a2-cc9a-4007-9a4c-b448bd6fece1/image.png)

![](https://velog.velcdn.com/images/aristia/post/b77f3c6f-2a2d-4943-9ec3-5e5938f01c84/image.png)

그런데, 이렇게 xml 파일로 bean 들을 관리하다보면, 프로젝트의 크기가 커질수록 입력해야 할 내용들도 많아지고 번거로워 진다.

특히 c:employee-ref="bean_id" 와 같이, `bean으로 생성된 객체를 주입할 경우` 자동적으로 주입할 수 있도록 하는 속성이 존재한다.
그것이 바로 `autowired` 이다.

### Auto-Wireing

자동주입(자동으로 `의존 객체`를 주입하는 기능) 기능이다.

명시적인 언급 없이도 Bean이 주입될 수 있다.


XML : 의존관계를 파악하는 것이 용이하지만, 프로젝트의 사이즈가 커질수록 양이 너무 많아지기 때문에 관리가 어려워진다.

그래서 이를 개선하기 위해 등장한 방식이 Auto-Wireing 방식이다.

`Auto-Wireing` 에는 `3가지` 방식이 있다.

#### 1. XML 상에서 속성(autowire)을 이용하는 방법

``` xml
<bean autowire="byName" />
autowire 속성 추가 시, bean의 식별자(bean의 id)를 가지고 주입하게 된다.
```


![](https://velog.velcdn.com/images/aristia/post/516ecf21-2a65-44af-a4d3-797d9d8bc89d/image.png)

![](https://velog.velcdn.com/images/aristia/post/4afe321f-728b-4b76-a540-cf05d53304ce/image.png)

![](https://velog.velcdn.com/images/aristia/post/2ad4e95c-9596-4ae2-ae0b-e56b4468e873/image.png)

![](https://velog.velcdn.com/images/aristia/post/518a15b6-243b-4d5e-8874-64710958e3c2/image.png)

만약 TestBean 이라는 클래스 내부에 `setData1()` 이 존재하지 않거나 혹은 `setData3()` 이라는 setter 가 있는데 xml 내부의 `bean id`가 `data1` 이라는 등, setter의 name 과 주입할 bean 의 id 가 일치하지 않는다면, autowire 로 주입이 이루어지지 않는다.


그렇다면 testBean 의 instance field 이름을 기준으로 찾는 것일까, 아니면 setter 의 인자 이름을 기준으로 찾는 것일까?

![](https://velog.velcdn.com/images/aristia/post/7bc3ee2e-8d2b-4c6b-9f53-9e82cb941457/image.png)

![](https://velog.velcdn.com/images/aristia/post/3ef18acf-6683-4f82-a337-6e87bd07bf61/image.png)

=> bean 의 Id와 instance field 의 식별자 이름이 일치한다면, 자동 주입이 된다.
    



#### 2. XML 상에서 타입을 이용하는 방법
``` xml
<bean autowire="byType" />
bean 의 클래스 타입을 가지고 주입하게 된다.
```

![](https://velog.velcdn.com/images/aristia/post/872f5535-89e6-4b4a-a94e-f462ea886a40/image.png)

![](https://velog.velcdn.com/images/aristia/post/9dd6ae2c-dcca-488b-b719-40a8bd320e6e/image.png)

![](https://velog.velcdn.com/images/aristia/post/e96a6ca1-4b59-4c7d-b42a-42184582cfb1/image.png)

로그를 보면 동일한 getData1() 과 getData2() 를 통해 출력되는 객체 data1 과 data2 가 동일한 객체(`primary=true` 속성이 부여된 `data1 bean` 객체 ) 임을 알 수 있다.

#### 2-2. 생성자를 이용하는 방법
- 내부적으로는 byType 을 통하게 된다.

![](https://velog.velcdn.com/images/aristia/post/6596dcc2-b48b-4226-b7f3-9eaf4824bd69/image.png)

![](https://velog.velcdn.com/images/aristia/post/404fe6f9-8909-45fc-b779-d2f5f0924c2f/image.png)

#### XML 파일 전체적으로 authwire 를 거는 방법

![](https://velog.velcdn.com/images/aristia/post/9fc3e9ce-6838-4ec3-a58c-d3d6a8098ecd/image.png)

`<xml>` 태그의 속성 안에 default-autowire를 통해 모든 bean 주입에 대해 자동 주입을 설정할 수 있다.
만약 이 설정을 한 뒤, 자동 주입을 하지 않을 bean 이 있다면
`authwire="no"` 속성을 입력하면 된다.


#### 3. 어노테이션을 이용하는 방법

``` java
@Autowired
private Object obj;

어노테이션을 가지고 주입할 때에는 내부적으로 "byType" 방식으로 주입한다.
```

#### 📌 @Component

`@Component` 라는 어노테이션을 클래스에 입력하게 되면, 해당 클래스 자체를 bean 으로 등록한다.

이 클래스에 대한 정보에 applicationContext 에 저장되는 것이다. 이 클래스를 기반으로 bean 객체가 생성되어 주입된다.

`@Component` 로 bean 이 등록된다면, xml 파일에서 bean을 생성할 때 입력해야 했던 bean 의 id 값은 자동적으로 클래스의 이름으로 잡히게 된다. `카멜케이스에 의거해 첫글자는 소문자로!`

혹은 `@Component("id값 입력")` 을 통해 id 값을 지정해줄 수도 있다.

Annotaion 설정을 이용하기 위해서는, XML에 특별한 code 를 넣어야 한다. 즉 xml 내부에 설정은 annotaion 으로 하겠다는 선언을 해주는 코드가 필요하다는 의미이다.

#### 📌 @Autowired

자동으로 의존관계를 맺을 때 사용하는 annotation 이다.

사용이 가능한 케이스는 3가지가 있다.

- class 에 붙일 수 있다.
(Component 와 같이 입력할 수도 있다. 이 경우 bean 으로 생성한 class에 대해 해당 class가 가진 모든 필드나 메소드를 자동 주입 하겠다는 의미이다.)

- 특정 필드에 붙일 수 있다.(가장 자주 쓰이는 방식)

- method 에 붙일 수 있다.
(일반적으로 setter 를 지칭하는데, 일반 method 에도 붙일 수는 있지만 자주 쓰이지는 않는다.)


